# Profile: prod (produção Railway com PostgreSQL)

# Database PostgreSQL
spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}
spring.datasource.username=${PGUSER}
spring.datasource.password=${PGPASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:create}
spring.jpa.show-sql=false

# JPA otimizado
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# H2 Console desabilitado
spring.h2.console.enabled=false

# Redis
spring.data.redis.url=${REDIS_URL}
# spring.data.redis.host=${REDIS_HOST}
# spring.data.redis.port=${REDIS_PORT:6379}
# spring.data.redis.password=${REDIS_PASSWORD}
# spring.data.redis.ssl.enabled=true

# SendGrid API
sendgrid.api.key=${SENDGRID_API_KEY}
spring.mail.username=${SMTP_USERNAME:noreply@seudominio.com}

# Desabilita auto-config SMTP
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration

# URL base
app.base-url=${APP_BASE_URL:https://paganois-production.up.railway.app}

# Logging produção
logging.level.org.springframework.security=WARN
logging.level.com.atwo.paganois=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Servidor
server.port=${PORT:8080}
server.error.include-message=never
server.error.include-stacktrace=never

app.security.h2-console-enabled=false